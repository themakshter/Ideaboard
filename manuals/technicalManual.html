<!DOCTYPE html>
<html>
<head>
	<title>Technical Manual</title>
	<meta name="viewport" content="width-device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="css/main.css">
	<link rel="stylesheet" href="css/prism.css">
	<script type="text/javascript" src="js/jquery-2.1.1.min.js"></script>
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
	<script src="js/prism.js"></script>
</head>
<body>
	<div class="container">
		<h1>
			Ideaboard Technical Manual
			<br>
			<small>(mak1g11, mrt1g11)</small>
		</h1>
		<h2>Technologies</h2>
		<h2>Architecture</h2>
		<p>We decided to implement a client server architecture, where the client uses a RESTful API to communicate with the server. This is because:</p>
		<ul>
			<li>We wanted the the users to be able to access their notes from anywhere.</li>
			<li>A RESTful API back-end is uncoupled from the front-end implementation, this allows any other front-end implementation. This is important as in the future we may build a native mobile application which can use the same back-end as the web application.</li>
			<li>RESTful API's are much more simple to interact with than alternatives such as soap</li>
		</ul>
		<h2>Back end</h2>
		<h2>Front end</h2>
			<h3>User Interface</h3>
			<p>IdeaBoard uses a natural user interface, a natural user interface is one which is initially invisible, but whilst the user explores the application they discover and learn the supported functions. As such upon first seeing the board the user sees only a series of notes, however, upon hovering over with a mouse they can see UI interface elements to change colour and delete notes. When the user selects text a menu appears under their cursor allowing them to:</p>
			<ul>
				<li>Create bullet points and numbered lists</li>
				<li>Make text bold, underline or italic</li>
				<li>Create heading</li>
				<li>Make links</li>
			</ul>
			<p>Upon hovering over the end of a list or column a user discovers the new note or new column button. All of these appearing interface elements are animated to fade in and out, this is so that the user is not forced into sudden disorientating state changes when editing a board.</p>

			<p>Whilst we are very pleased of our user interface it is heavily reliant on mouse cursors in order to operate. Thus it is not suitable for mobile use. Our plan in the future is to implement a mobile application in native code the utilises the same API as our web application. When a mobile user accesses the site they can then be redirected to the relevant app store to download a mobile version.</p>

			<p>Despite not implementing a mobile version of the site we have implemented a responsive design to be flexible to different display sizes. Our responsive design was implmented using the Bootstrap css framework. Below is an example of the board selection screen responding to width changes.</p>
			<figcaption>
				<figure>
					<img src="img/narrowboards.png">
				</figure>
				<caption>the board selection screen on a narrow screen</caption>
			</figcaption>
			<figcaption>
				<figure>
					<img src="img/wideboards.png">
				</figure>
				<caption>Board selection screen on a wide screen</caption>
			</figcaption>
			<h3>Front-end libraries</h3>
				<p>One the skill we aimed to improve is the use of JavaScript libraries for single page applications. With extensive use of libraries for user interface elements we were able to easily implement attractive controls far more easily than if we had coded them ourselves.</p>
				<p>In addition to the libraries used below this page uses <a href="http://prismjs.com">Prismjs</a> to syntax highlight code examples.</p>
				<h4>
					<a href='http://backbonejs.org/'>Backbone.js</a> 
				</h4>
				<h5>Where?</h5>
				<p>To create the in app router allowing history and navigation on a single page web application</p>
				<h5>Why?</h5>
				<p>We wanted to use a lightweight MVC web framework to give structure to our application and Backbone is very lightweight and we had previous experience with it. However, we found using a MVC framework for our site too cumbersome and simply developed it without with the exception of the in app router which we needed for basic functionality.</p>
				<h5>Example</h5>
				<figure>
<!--code blocks cannot be indented otherwise itll mess up formatting -->
<pre>
<code class="language-javascript">
var AppRouter = Backbone.Router.extend(
{
	routes:
	{
		""			: "listBoards",
		"boards/new":"newBoard",
		"boards/:id":"showBoard",
		"*actions": "defaultRoute"
	}
});

var app_router = new AppRouter();
app_router.on('route:showBoard',function(id)
{
	showBoard(id);
});
</code>
</pre>
					<figcaption>The code in main.js used create a router, define its routes and follow the showBoard route.</figcaption>
				</figure>

				<h4><a href='http://jquery.com/'>jQuery</a></h4>
				<h5>Where?</h5>
				<p>Used throughout the application for DOM manipulation, ajax requests and smoothing over API differences between web browsers.</p>
				<h5>Why?</h5>
				<ul>
					<li>Both our team members had extensive experience with jQuery</li>
					<li>It allows for more concise code (it's marketed as'The Write Less, Do More, JavaScript Library.')</li>
					<li>Its the most commonly used front-end we library so its easy to find help</li>
					<li>Other libraries(jQuery notebook and JQuery color picker) we wanted to use were jQuery extensions</li>
				</ul>
				<h5>Example</h5>
<pre>
<code class="language-javascript">
&lt;!-- DOM manipulation - Creating the divs that hold the notes --&gt;
colContainer.append("<div class=\"notesContainer\">");

&lt;!-- An Ajax call to get the board name and author--&gt;
$.get(apiURL+'/boards/'+boardID,function(data)
{
	$(".userField").text(data.author);
	$(".boardField").text(data.name);
});
</code>
</pre>
				<h4>
					<a href='https://github.com/raphaelcruzeiro/jquery-notebook'>JQuery notebook</a>
				</h4> 
				<h5>Where</h5>
				<p>So that the notes support rich text, when the user highlights a note a bubble allowing editing action applied to the selected text. </p>
				<img src="img/notebook-example.png">
				<h5>Why</h5>
				<p>Used because the editor for jQeuery notebook only appears when text is selected it fulfilled our goal of creating a natural user interface. ALso it allows all the rich text function we wish to use.</p>
				<h5>Example</h5>
				<figcaption>
					<figure>
<pre>
<code class="language-javascript">
$(textArea).notebook();

$(textArea).on('contentChange', function(e)
{
	var textArea = e.originalEvent.target;
	var note = $(textArea).parent();
	var id = note.attr('data-noteID');
	var colID = $(note).parents('.boardColumn').attr('data-columnid');
	updateNote(id,colID,currentBoardID);
});
</code>
</pre>
					</figure>
					<caption>Code used to initialise jQuery Notebook and attach an event listener to update on text changes</caption>
				</figcaption>
				<h5>Problems</h5>
				<p>We encountered incompatibilities between jQuery notebook and Twitter bootstrap with regards to the position of the pop up bubble. Upon discovering this the site already had already been developed using both these libraries. We found however, that these errors only occurred when the parent elements of the notebook used relative positioning so it was relatively simple to work around. </p>
				<figure>
					<img src="img/notebook-position.png" class="img-rounded">
					<figcaption>jQuery notebook with relatively positioned columns causing the bubble appear up and to the right of selected text (during development)</figcaption>
				</figure>

				<h4><a href='http://wanderinghorse.net/computing/javascript/jquery/colorpicker/'>jQuery Color Picker</a></h4>
				<h5>Where</h5>
				<p>Used to edit the colour of the notes, was slightly modified to support our selection of colours and add context to the callback function</p>
				<img src="img/colorpicker-example.png" class="img-rounded">
				<h5>Why</h5>
				<p>We chose this because it supports only a limited number of colours rather than a any shade. This means that the UI is simpler and the user can only pick colours that complement other colours and work with the black text.</p>
				<h5>Example</h5>
				<figcaption>
					<figure>
<pre>
<code class="language-javascript">
$(colorPicker).empty().addColorPicker(
{
		clickCallback: function(c,picker)
		{
			$(picker).parent().css('background-color',c);
			updateNoteDiv(picker.parent());
		}
});
</code>
</pre>
					</figure>
					<caption>Code used to initialise colour picker and provide it with a callback to update the note and server on modification</caption>
				</figcaption>

				<h4><a href='http://getbootstrap.com/'>Twitter Bootstrap</a> </h4>
				<p>Used for page Layout and design. The top navigation bar is implemented using bootstrap components. Also used in the project brief and manuals for the site</p>
				<h5>Example</h5>
				<figcaption>
					<figure>
<pre>
<code class="language-javascript">
boardList.append('<h1 class="text-center">Available Boards</h1><br>');
$.get(apiURL+"/boards",function(data)
{
	var boards = '<ul class="list-inline">';
	$.each(data,function(key,value)
	{
		boards+= "<li class='boardLink ' data-boardID='"+value._id+"'><a class='board plain thumbnail text-center' href='#boards/"+value._id+"'><h3>"+value.name+"<br><small>"+value.author+"</small></h3></a></li>";
	});
	boards+="</ul>";
	boardList.append(boards);
});
	
</code>
</pre>
					</figure>
					<caption>Code used to display boards generating markup with the bootstrap classes text-center and list-inline.</caption>
				</figcaption>
			<h3>Testing</h3>
			<p>In order to provide test data on start up the server checks to see if a database exists, and if it does not it generates a set of test data automatically.</p>
			<p>We chose to target support for the previous two versions of the four most popular desktop browsers.Because our user interface is not suitable for touch screens we chose not to support mobile browsers.</p>
			<ul>
				<li>Internet Explorer 9+</li>
				<li>Google Chrome 37+</li>
				<li>Firefox 30</li>
				<li>Safari 6.2</li>
			</ul>
			<p>  We developed the site in Google Chrome because we were most productive with their development tools.</p>
	</div>
</body>
</html>